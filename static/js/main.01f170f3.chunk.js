(this["webpackJsonpcchn-f2e-interview.git"]=this["webpackJsonpcchn-f2e-interview.git"]||[]).push([[0],{207:function(t,e,n){t.exports=n(235)},235:function(t,e,n){"use strict";n.r(e);var a=n(8),r=n(0),c=n.n(r),u=n(32),o=n.n(u),i=n(20),l=n(5),f=n(4),d=n(102),s=n(94),m=n(105),h=n(22),g=n(12),p=n.n(g),v=n(1);function b(){var t=Object(a.a)(["\n  margin: 0 auto;\n\n  h3 {\n    margin: 0;\n    text-align: center;\n  }\n"]);return b=function(){return t},t}var y=l.c.div(b());function E(t){var e=t.xLabel,n=t.yLabel,a=t.title,u=t.width,o=t.height,i=t.data,l=t.onSelect,f=Object(r.useRef)();return Object(r.useEffect)((function(){v.o(f.current).attr("width",u).attr("height",o)}),[u,o]),Object(r.useEffect)((function(){i.length&&function(){var t=v.o(f.current),a={top:""===n?20:40,right:0,bottom:50,left:50},r=v.k().domain([0,v.f(i,(function(t){return t.value}))]).nice().range([o-a.bottom,a.top]),c=v.j().domain(v.i(i.length)).range([a.left,u-a.right]).padding(.1);t.append("g").attr("fill","steelblue").selectAll("rect").data(i).join("rect").attr("x",(function(t,e){return c(e)})).attr("y",(function(t){return r(t.value)})).attr("height",(function(t){return r(0)-r(t.value)})).attr("width",c.bandwidth()).attr("value",(function(t){return t.value})).attr("name",(function(t){return t.name})).on("mouseover",(function(t){return v.o(t.target).attr("opacity",.6).attr("cursor","pointer")})).on("mouseout",(function(t){return v.o(t.target).attr("opacity",1)})).on("click",(function(t){return l(t.target.getAttribute("name"))})),t.append("g").call((function(t){return t.attr("transform","translate(0,".concat(o-a.bottom,")")).call(v.b(c).tickFormat((function(t){return i[t].name})).tickSizeOuter(0)).append("text").attr("transform","translate(".concat(u/2,",").concat(a.bottom/2,")")).attr("x",6).attr("dy",".71em").style("text-anchor","end").style("font-size","1rem").attr("fill","#000").text(e)})),t.append("g").call((function(t){return t.attr("transform","translate(".concat(a.left,",0)")).call(v.c(r).ticks(null,i.format)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",-a.left).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(i.y)})).append("text").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-size","1rem").attr("fill","#000").text(n)}))}()}),[e,n,u,o,i,l]),c.a.createElement(y,{style:{width:u}},c.a.createElement("h3",null,a),c.a.createElement("svg",{ref:f}))}E.defaultProps={xLabel:"",yLabel:"",title:"",width:600,height:400,data:[],onSelect:function(){}};var x=E;function j(){var t=Object(a.a)(["\n  margin: 0 auto;\n\n  h3 {\n    margin: 0;\n    text-align: center;\n  }\n"]);return j=function(){return t},t}var k=l.c.div(j());function O(t){var e=t.title,n=t.width,a=t.height,u=t.data,o=t.onSelect,i=Object(r.useRef)();return Object(r.useEffect)((function(){v.o(i.current).attr("width",n).attr("height",a)}),[n,a]),Object(r.useEffect)((function(){u.length&&function(){var t=v.o(i.current),e=20,r=50,c=30,l=30,f=v.m().domain([u[0].date,u[u.length-1].date]).range([l,n-r]),d=v.k().domain([0,v.f(u,(function(t){return t.value}))]).range([a-c,e]),s=v.l(["key"],v.n);t.append("g").call((function(t){return t.attr("transform","translate(0,".concat(a-c,")")).call(v.b(f).ticks(n/80).tickSizeOuter(0))}));var m=t.append("g").selectAll("g").data([u]).join("g");m.append("path").attr("fill","none").attr("stroke",(function(t){return s(t[0].key)})).attr("stroke-width",1.5).attr("d",v.e().x((function(t){return f(t.date)})).y((function(t){return d(t.value)}))),m.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("text-anchor","middle").selectAll("text").data((function(t){return t})).join("text").text((function(t){return t.value})).attr("value",(function(t){return t.value})).attr("name",(function(t){return t.key})).on("mouseover",(function(t){return v.o(t.target).attr("opacity",.6).attr("cursor","pointer")})).on("mouseout",(function(t){return v.o(t.target).attr("opacity",1)})).on("click",(function(t){return o(t.target.getAttribute("name"))})).attr("dy","0.35em").attr("x",(function(t){return f(t.date)})).attr("y",(function(t){return d(t.value)})).clone(!0).lower().attr("fill","none").attr("stroke","white").attr("stroke-width",6)}()}),[n,a,u,o]),c.a.createElement(k,{style:{width:n}},c.a.createElement("h3",null,e),c.a.createElement("svg",{ref:i}))}O.defaultProps={xLabel:"",yLabel:"",title:"",width:600,height:400,data:[],onSelect:function(){}};var w=O;function S(){var t=Object(a.a)(["\n  margin: 0 auto;\n\n  h3 {\n    margin: 0 0 1rem;\n    text-align: center;\n  }\n"]);return S=function(){return t},t}var C=l.c.div(S());function R(t){var e=t.title,n=t.width,a=t.height,u=t.data,o=t.onSelect,i=Object(r.useRef)();return Object(r.useEffect)((function(){v.o(i.current).attr("width",n).attr("height",a)}),[n,a]),Object(r.useEffect)((function(){u.length&&function(){var t=v.o(i.current),e=v.g().sort(null).value((function(t){return t.value})),a=Math.min(n,500),r=Math.min(n,a)/2*.8,c=v.a().innerRadius(r).outerRadius(r),l=v.a().innerRadius(0).outerRadius(Math.min(n,a)/2-1),f=v.l().domain(u.map((function(t){return t.name}))).range(v.h((function(t){return v.d(.8*t+.1)}),u.length).reverse()),d=e(u);t.attr("viewBox",[-n/2,-a/2,n,a]),t.append("g").attr("stroke","white").attr("stroke-width","3px").selectAll("path").data(d).join("path").attr("fill",(function(t){return f(t.data.name)})).attr("value",(function(t){return t.data.value})).attr("name",(function(t){return t.data.name})).on("mouseover",(function(t){return v.o(t.target).attr("opacity",.6).attr("cursor","pointer")})).on("mouseout",(function(t){return v.o(t.target).attr("opacity",1)})).on("click",(function(t){return o(t.target.getAttribute("name"))})).attr("d",l).append("title").text((function(t){return"".concat(t.data.name,": ").concat(t.data.value.toLocaleString(),"%")})),t.append("g").attr("font-family","sans-serif").attr("font-size",12).attr("text-anchor","middle").selectAll("text").data(d).join("text").attr("transform",(function(t){return"translate(".concat(c.centroid(t),")")})).call((function(t){return t.append("tspan").attr("y","-0.4em").attr("font-weight","bold").text((function(t){return t.data.name}))})).call((function(t){return t.append("tspan").attr("x","5px").attr("y","0.7em").attr("fill-opacity",.8).attr("text-align","center").text((function(t){return"".concat(t.data.value.toLocaleString(),"%")}))}))}()}),[n,a,u,o]),c.a.createElement(C,{style:{width:n}},c.a.createElement("h3",null,e),c.a.createElement("svg",{ref:i}))}R.defaultProps={xLabel:"",yLabel:"",title:"",width:600,height:400,data:[],onSelect:function(){}};var A=R;function L(){var t=Object(a.a)(["\n  table {\n    margin: 0 auto;\n    border-collapse: collapse;\n    text-align: center;\n\n    tr.mark {\n      color: #fff;\n      background: #d91406;\n    }\n\n    thead {\n      border-bottom: 1px solid #000;\n      text-transform: uppercase;\n    }\n\n    td,\n    th {\n      padding: .5rem;\n    }\n  }\n"]);return L=function(){return t},t}var z=l.c.div(L());function B(t){var e=this,n=function(t){return c.a.createElement("tr",null,Object.keys(t).map((function(t,e){return c.a.createElement("th",{key:"head-".concat(e)},t)})))},a=function(e,n){var a=t.mark===e.key||t.mark===e.name?"mark":"";return c.a.createElement("tr",{key:"row-".concat(n),className:a},Object.keys(e).map((function(t,n){return c.a.createElement("td",{key:"row-".concat(n)},String(e[t]))})))};return c.a.createElement(z,null,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.length>0?c.a.createElement("table",null,c.a.createElement("thead",null,n(t[0])),c.a.createElement("tbody",null,t.map(a.bind(e)))):null}(t.data))}B.defaultProps={data:[],mark:""};var F=B;function H(){var t=Object(a.a)(["\n  margin-bottom: auto;\n  text-align: center;\n\n  label {\n    margin-right: 1rem;\n  }\n"]);return H=function(){return t},t}function _(){var t=Object(a.a)(["\n  position: relative;\n  padding: 2rem;\n\n  > div:first-child {\n    margin-bottom: 1rem;\n  }\n"]);return _=function(){return t},t}var T=l.c.main(_()),M=l.c.div(H());var N=[{key:"root",path:"/",exact:!0,component:function(){var t=[{name:"\u6bcf\u5e74\u6240\u6709\u96fb\u52d5\u8eca\u8eca\u578b\u6578\u91cf",value:1},{name:"\u5404\u8eca\u5ee0\u96fb\u6a5f\u8eca\u6578\u91cf\u4f54\u6bd4",value:2},{name:"\u96fb\u52d5\u8ecaSize\u7684\u5e73\u5747\u96fb\u52d5\u8eca\u99ac\u529b(KW)",value:3}],e=Object(i.c)((function(t){return t.cars})).datas,n=Object(r.useState)(1),a=Object(h.a)(n,2),u=a[0],o=a[1],l=Object(r.useState)(null),f=Object(h.a)(l,2),d=f[0],s=f[1],g=[],v=function(t){return s(t)};switch(u){default:case 1:g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p.a.chain(t).groupBy("YEAR").map((function(t,e){return{key:e,date:new Date(e),value:p.a.sumBy(t,"(kW)")}})).sortBy("date").value()}(e);break;case 2:g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p.a.chain(t).groupBy("Make").map((function(t,e){return{name:e,value:t.length}})).reduce((function(t,e,n,a){var r=e.name,c=e.value;return[].concat(Object(m.a)(t),[{name:r,value:p.a.round(100*p.a.floor(c/p.a.sumBy(a,"value"),3),2)}])}),[]).value()}(e);break;case 3:g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p.a.chain(t).groupBy("Size").map((function(t,e){return{name:e,value:p.a.round(p.a.meanBy(t,"(kW)"),2)}})).sortBy("value").value()}(e)}return c.a.createElement(T,null,c.a.createElement(M,null,c.a.createElement("label",null,"\u8acb\u9078\u64c7\u5716\u8868"),c.a.createElement("select",{onChange:function(t){return o(Number(t.target.value))}.bind(this)},t.map((function(t,e){var n=t.name,a=t.value;return c.a.createElement("option",{key:"opt-".concat(e),value:a},e+1,". ",n)})))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=p.a.find(t,(function(t){return t.value===u})),a=n.name;switch(u){default:case 1:return c.a.createElement(w,{width:400,height:300,data:e,title:a,onSelect:v});case 2:return c.a.createElement(A,{width:400,height:300,data:e,title:a,onSelect:v});case 3:return c.a.createElement(x,{width:800,height:300,data:e,title:a,xLabel:"Size",yLabel:"(kW)",onSelect:v})}}(g),c.a.createElement(F,{data:g,mark:d}))},title:"CC TECH - CARS"}],W=n(21),P=n.n(W),J=n(100),U=n(101),D=n.n(U),I=n(14),X=n(13);function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(t).split(/\r\n/).filter((function(t){return t.length})).reduce((function(t,e,n){if(0===n)t.header=e.split(","),t.headerObj=t.header.reduce((function(t,e){return Object(I.a)({},t,Object(X.a)({},e,e))}),{});else{var a=e.split(",").reduce((function(e,n,a){return Object(I.a)({},e,Object(X.a)({},t.header[a],Number.isNaN(Number(n))?n:Number(n)))}),{});t.datas.push(a)}return t}),{header:[],headerObj:{},datas:[]})}var Y={datas:[],header:[],headerObj:{},loading:!1,error:null};var q=function(){var t=Object(i.b)();return Object(r.useEffect)((function(){t(function(){var t=Object(J.a)(P.a.mark((function t(e){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:"FETCH_CARS"});case 2:return t.next=4,D.a.get("./api/cars.csv").then((function(t){return e({type:"FETCH_CARS_SUCCESS",payload:t.data})})).catch((function(t){return e({type:"FETCH_CARS_ERROR",payload:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),c.a.createElement(d.a,null,c.a.createElement(f.c,null,N.map((function(t){var e=t.key,n=t.path,a=t.exact,r=t.component,u=t.title;return c.a.createElement(f.a,{key:e,exact:a,path:n,title:u,render:function(t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,null,c.a.createElement("title",null,u)),c.a.createElement(r,t))}})}))))},G=n(15),Q=n(103),V=n(104),Z=Object(G.combineReducers)({cars:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_CARS":return Object(I.a)({},t,{loading:!0});case"FETCH_CARS_SUCCESS":return Object(I.a)({},t,{loading:!1},K(e.payload));case"FETCH_CARS_ERROR":return Object(I.a)({},t,{loading:!1,error:e.payload});default:return t}}}),$=Object(G.createStore)(Z,Object(Q.composeWithDevTools)(Object(G.applyMiddleware)(V.a))),tt=Object(I.a)({},{black:"#111",white:"#fefefe",gray:"#87868c",blue:"#1e78a9",green:"#009f9d",red:"#f2724f"},{},{globalFont:"'Microsoft JhengHei', 'Segoe UI', Helvetica, Arial, Helvetica, sans-serif;"},{},{screenXs:"480px",screenSm:"576px",screenMd:"768px",screenLg:"992px",screenXl:"1200px"});function et(){var t=Object(a.a)(["\n\n  *,\n  ::after,\n  ::before {\n    box-sizing: border-box;\n  }\n\n  html,\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: ",";\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n"]);return et=function(){return t},t}var nt=Object(l.b)(et(),(function(t){return t.theme.globalFont}));o.a.render(c.a.createElement(l.a,{theme:tt},c.a.createElement(nt,null),c.a.createElement(i.a,{store:$},c.a.createElement(q,null))),document.getElementById("root"))}},[[207,1,2]]]);